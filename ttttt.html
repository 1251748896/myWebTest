<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script src="netTools/jquery.min.js" type="text/javascript">
		</script>
		<script src="myEChartFiles/echarts.min.js" type="text/javascript">
		</script>
		
		<style type="text/css">
			
		</style>
		
		
		
		
	</head>
	<body>
		
		<div id="appBannerFormDiv" style="width: 100%;height: 200px;">
		</div>
		
		<script type="text/javascript">
			
			var valueArr = [];
			
			var tokken = "595333c1-f86e-434b-bd49-c8ed4d1d6726";
			var siteTToken = "";
			getData(tokken,siteTToken);
			//获取数据
			function getData (token, siteToken) {
				
				$.ajax({
					type:"GET",
					url:"http://183.220.115.100:8088/api/device/reports",
					dataType:"json",
					data:{
						"token":token,
						"siteToken":siteToken,
					},
					success:function(resultss) {
						var formReportData = resultss.results;
						
						//var onlineDic = new Array();
						onlineDic = formReportData.onlineInfo.online;
//						/onlineDic.name = "在线数量";
//						valueArr.push(onlineDic);
					    console.log(onlineDic);
						
						
						//var offlineDic = new Array();
						var offLineCount = formReportData.onlineInfo.total - formReportData.onlineInfo.online;
						//offlineDic["value"] = offLineCount;
						//offlineDic["name"] = "离线数量";
						//valueArr[1] = offlineDic;
						
						console.log(offLineCount);
						
						
						//创建表格
			var bannerWebForm = echarts.init(document.getElementById("appBannerFormDiv")); 
			var option = {
				title: {
					text:'设备在线率',
					x:'center',
				},
				legend: {
					data:['在线设备','离线设备'],
					x:'center',
				},
				series: {
					name:['在线设备','离线设备'],
					type:'pie',
					data:[{value:onlineDic, name:'在线数量'},{value:offLineCount, name:'离线数量'}],
					//data:[15,56],
				},
			};
			
			bannerWebForm.setOption(option);
						
						
					},
					error:function(err) {
						console.log(err);
					}
					
					
				}	
				)
			}

			
		</script>
		
		
		
	</body>
</html>
